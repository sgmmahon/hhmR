<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Hierarchical Heatmap — hhm • hhmR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Hierarchical Heatmap — hhm"><meta property="og:description" content="Creates a labelled heatmap from heirarchical data. This function is
useful if you wish to create a heatmap where the categories shown on both the x
and y axis can be grouped in some way. This heatmap will order the categories by
their assigned group and present both the categories and group labels along the
axes. An example might be a series of smaller geographies (lower categories) which
aggregate into larger geographical regions (upper groups)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hhmR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/hhmR_overview.html">Hierarchical Heatmaps (hhmR) Vignette</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/sgmmahon/hhmR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Hierarchical Heatmap</h1>
    <small class="dont-index">Source: <a href="https://github.com/sgmmahon/hhmR/blob/main/R/hhm.R" class="external-link"><code>R/hhm.R</code></a></small>
    <div class="hidden name"><code>hhm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a labelled heatmap from heirarchical data. This function is
useful if you wish to create a heatmap where the categories shown on both the x
and y axis can be grouped in some way. This heatmap will order the categories by
their assigned group and present both the categories and group labels along the
axes. An example might be a series of smaller geographies (lower categories) which
aggregate into larger geographical regions (upper groups).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hhm</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">ylower</span>,</span>
<span>  <span class="va">yupper</span>,</span>
<span>  <span class="va">xlower</span>,</span>
<span>  <span class="va">xupper</span>,</span>
<span>  <span class="va">values</span>,</span>
<span>  rm_diag <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  lgttl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bins <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cbrks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cclrs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  norm_lgd <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  lgdps <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  xttl_height <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  yttl_width <span class="op">=</span> <span class="fl">0.15</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>A data.frame with containing values with which to populate the heatmap.
The data.frame must include columns specifying the lower categories (`ylower`,
`xlower`) and upper groups (`yupper`, `xupper`) that each value corresponds to.
These categories and groups will be used to arrange and label the rows and
columns of the heatmap. It must also contain a `values` variable containing the
values used to populate the heatmap. Note that the groups will by default be
arranged alphabetically (top to bottom / left to right). The ordering of the
groups can be manually specified by converting yupper and/or xupper to factors.
In this case, the groups will be ordered based on the ordering of the factor
levels.</p></dd>


<dt id="arg-ylower">ylower<a class="anchor" aria-label="anchor" href="#arg-ylower"></a></dt>
<dd><p>A column in `df` containing the categories that will be presented
as rows along the y-axis of the heatmap.</p></dd>


<dt id="arg-yupper">yupper<a class="anchor" aria-label="anchor" href="#arg-yupper"></a></dt>
<dd><p>A column in `df` containing the groupings that will be used to
arrange the heatmap rows.</p></dd>


<dt id="arg-xlower">xlower<a class="anchor" aria-label="anchor" href="#arg-xlower"></a></dt>
<dd><p>A column in `df` containing the categories that will be presented
as columns along the x-axis of the heatmap.</p></dd>


<dt id="arg-xupper">xupper<a class="anchor" aria-label="anchor" href="#arg-xupper"></a></dt>
<dd><p>A column in `df` containing the groupings that will be used to
arrange the heatmap columns.</p></dd>


<dt id="arg-values">values<a class="anchor" aria-label="anchor" href="#arg-values"></a></dt>
<dd><p>A column in `df` containing the values used to populate the
heatmap.</p></dd>


<dt id="arg-rm-diag">rm_diag<a class="anchor" aria-label="anchor" href="#arg-rm-diag"></a></dt>
<dd><p>Do not show values for categories along the x and y axes that
are identical (defaults to `FALSE`). This is particularly useful for
origin-destination heatmaps, where the user may want to hide the diagonal
values.</p></dd>


<dt id="arg-lgttl">lgttl<a class="anchor" aria-label="anchor" href="#arg-lgttl"></a></dt>
<dd><p>Option to manually define legend title.</p></dd>


<dt id="arg-bins">bins<a class="anchor" aria-label="anchor" href="#arg-bins"></a></dt>
<dd><p>Option to break the data into a specified number of groups
(defaults to `NULL`). The thresholds between these groups will be equally
spaced between zero and the maximum value observed in `values`.</p></dd>


<dt id="arg-cbrks">cbrks<a class="anchor" aria-label="anchor" href="#arg-cbrks"></a></dt>
<dd><p>Vector of custom breaks, if users wish to use a discrete legend
colour scheme (defaults to `NULL`). For example, a supplied vector of `c(5,10,
20)` would break he values up into 5 ordered groups of ranges 0, 0-5, 5-10,
10-20 and 20+.</p></dd>


<dt id="arg-cclrs">cclrs<a class="anchor" aria-label="anchor" href="#arg-cclrs"></a></dt>
<dd><p>Vector of hexcodes, which to create a custom legend colour scheme
(defaults to `NULL`). If `cbrks` is supplied, `cclrs` must have a length
two longer than `cbrks`. If `bins` is supplied, `cclrs` must have a length
equal to the values provided to `bins`.</p></dd>


<dt id="arg-norm-lgd">norm_lgd<a class="anchor" aria-label="anchor" href="#arg-norm-lgd"></a></dt>
<dd><p>Normalised to between 0 and 1 in legend (defaults to `FALSE`).
Allows for consistency when comparing heatmaps across different datasets. At
present, this only works if all heatmap values are positive.</p></dd>


<dt id="arg-lgdps">lgdps<a class="anchor" aria-label="anchor" href="#arg-lgdps"></a></dt>
<dd><p>If using custom breaks, define the number of decimal points to
round the legend scale to (defaults to 0). If `norm_lgd` is `TRUE`, it will
default to 3.</p></dd>


<dt id="arg-xttl-height">xttl_height<a class="anchor" aria-label="anchor" href="#arg-xttl-height"></a></dt>
<dd><p>The space allocated to the group titles on the x-axis as a
proportion of the heatmap's height (defaults to 0.15).</p></dd>


<dt id="arg-yttl-width">yttl_width<a class="anchor" aria-label="anchor" href="#arg-yttl-width"></a></dt>
<dd><p>The space allocated to the group titles on the y-axis as a
proportion of the heatmap's width (defaults to 0.15).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A ggplot object containing the final heatmap.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Import toy demonstration dataset (see `?example_migration` for see details)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_migration</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Intial heatmap</span></span></span>
<span class="r-in"><span><span class="va">hierarchical_heatmap</span> <span class="op">=</span> <span class="fu">hhm</span><span class="op">(</span>df <span class="op">=</span> <span class="va">example_migration</span>,</span></span>
<span class="r-in"><span>                           ylower <span class="op">=</span> <span class="st">"Origin County"</span>,</span></span>
<span class="r-in"><span>                           xlower <span class="op">=</span> <span class="st">"Destination County"</span>,</span></span>
<span class="r-in"><span>                           yupper <span class="op">=</span> <span class="st">"Origin Region"</span>,</span></span>
<span class="r-in"><span>                           xupper <span class="op">=</span> <span class="st">"Destination Region"</span>,</span></span>
<span class="r-in"><span>                           values <span class="op">=</span> <span class="st">"Migration"</span>,</span></span>
<span class="r-in"><span>                           yttl_width <span class="op">=</span> <span class="fl">0.22</span>,</span></span>
<span class="r-in"><span>                           xttl_height <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For more details, see the package vignette at</span></span></span>
<span class="r-in"><span><span class="co"># https://sgmmahon.github.io/hhmR/articles/hhmR_overview.html</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Mahony, Francisco Rowe, Carmen Cabrera-Arnau.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

