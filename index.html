<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hierarchical Heatmaps • hhmR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Hierarchical Heatmaps">
<meta property="og:description" content="Allows users to create high-quality heatmaps heatmaps from labelled, hierarchical data. Specifically, for data with a two-level hierarchical structure, it will produce a heatmap where each row and column represents a category at the lower level. These rows and columns are then grouped by the higher-level group each category belongs to, with the names for each category and groups shown in the margins. While other packages (e.g. `dendextend`) allow heatmap rows and columns to be arranged by groups, I believe this is the only R package which also labels the data at both levels - i.e. both category and group names are shown of the left and bottom margins.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">hhmR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/hhmR_overview.html">Hierarchical Heatmaps (hhmR) Vignette</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sgmmahon/hhmR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="hhmr">hhmR<a class="anchor" aria-label="anchor" href="#hhmr"></a>
</h1></div>
<div class="section level2">
<h2 id="hierarchical-heatmaps">Hierarchical Heatmaps<a class="anchor" aria-label="anchor" href="#hierarchical-heatmaps"></a>
</h2>
<p>This package allows users to create high-quality heatmaps from labelled hierarchical data. Specifically, it requires input data in the form of a two-level hierarchical structure. It will produce a heatmap where each row and column represent a <em>category</em> at the lower level. Rows and columns are then grouped into a higher-level <em>groupings</em>. Names for each higher-level <em>category</em> and <em>groupings</em> are shown in the margins. While other packages (e.g. <code>dendextend</code>) allow heatmap rows and columns to be arranged by groups only, <code>hhmR</code> also allows the labelling of the data at both levels categories and groupings.</p>
<p>The package has two main functions: <code>hhm</code> and <code>tshhm</code>. These are explained in more detail below.</p>
<p><br></p>
<div class="section level3">
<h3 id="hhm-hierarchical-heatmap">
<code>hhm</code> (Hierarchical Heatmap)<a class="anchor" aria-label="anchor" href="#hhm-hierarchical-heatmap"></a>
</h3>
<p><code>hhm</code> creates a labelled heatmap from hierarchical data. This function is useful to create a heatmap where the categories shown on both the x and y axis are grouped in some way. This heatmap will order the categories by their assigned groupings, and present both the categories and grouping labels along the axes. An example using geographic data might be a series of smaller geographies (lower categories) which aggregate into larger geographical regions (upper groups).</p>
<p>This function requires a data.frame containing columns which specify the lower categories (<code>ylower</code>, <code>xlower</code>) and upper groupings (<code>yupper</code>, <code>xupper</code>). These categories and groupings are used to arrange and label rows and columns on a heatmap. The data.frame must contain a <code>values</code> variable containing values to populate the heatmap. Note that the groupings will, by default, be arranged alphabetically (top to bottom / left to right). The ordering of the groups can be manually specified by converting <code>yupper</code> and/or <code>xupper</code> to factors. In this case, the groupings will be ordered based on the ordering of the factor levels provided.</p>
<p>Below is an example of the <code>hhm</code> function’s application. For a more in-depth description of it’s usage, see the <a href="https://sgmmahon.github.io/hhmR/articles/hhmR_overview.html">package vignette</a>.</p>
<pre><code><span><span class="co"># Import package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sgmmahon/hhmR" class="external-link">hhmR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import toy demonstration dataset (see `?example_migration` for details)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_migration</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Intial heatmap</span></span>
<span><span class="va">hierarchical_heatmap</span> <span class="op">=</span> <span class="fu"><a href="reference/hhm.html">hhm</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">example_migration</span>,</span>
<span>                           ylower <span class="op">=</span> <span class="st">"Origin County"</span>,</span>
<span>                           xlower <span class="op">=</span> <span class="st">"Destination County"</span>,</span>
<span>                           yupper <span class="op">=</span> <span class="st">"Origin Region"</span>,</span>
<span>                           xupper <span class="op">=</span> <span class="st">"Destination Region"</span>,</span>
<span>                           values <span class="op">=</span> <span class="st">"Migration"</span>,</span>
<span>                           yttl_width <span class="op">=</span> <span class="fl">0.22</span>,</span>
<span>                           xttl_height <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View result</span></span>
<span><span class="va">hierarchical_heatmap</span></span></code></pre>
<p><img src="https://github.com/sgmmahon/hhmR/blob/main/images/hhm_initial_output.png?raw=true"></p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="tshhm-time-series-hierarchical-heatmap">
<code>tshhm</code> (Time-Series Hierarchical Heatmap)<a class="anchor" aria-label="anchor" href="#tshhm-time-series-hierarchical-heatmap"></a>
</h3>
<p><code>tshhm</code> creates a labelled time-series heatmap from heirarchical data. This function is useful if you wish to create a time-series heatmap where the categories shown on the y-axis can be grouped in some way. This heatmap will order the categories by their assigned group and present both the categories and group labels along the y-axis. An example might be a series of smaller geographies (lower categories) which aggregate into larger geographical regions (upper groups).</p>
<p>This function requires a data.frame containing columns that specify the lower categories (<code>lower</code>) and upper groups (<code>upper</code>) that each value corresponds to. These categories and groups will be used to arrange and label the rows of the heatmap. The data.frame must also contain a <code>values</code> variable, containing the values used to populate the heatmap, and a <code>times</code> variable, containing the time period during which each value was observed. Note that the groups in <code>upper</code> will by default be arranged alphabetically (top to bottom). The ordering of the groups can be manually specified by converting <code>upper</code> to a factor. In this case, the groups will be ordered based on the ordering of the factor levels. The ordering of rows within each group can also be specified using the <code>sort_lower</code> variable.</p>
<p>Below is an of how the <code>tshhm</code> function can be used. For more details, see the <a href="https://sgmmahon.github.io/hhmR/articles/hhmR_overview.html">package vignette</a>.</p>
<pre><code><span><span class="co"># Import packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import toy demonstration dataset (see `?example_time_series` for details)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_time_series</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Intial heatmap</span></span>
<span><span class="va">time_series_heatmap</span> <span class="op">=</span> <span class="fu"><a href="reference/tshhm.html">tshhm</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">example_time_series</span>,</span>
<span>                            lower  <span class="op">=</span> <span class="st">"County"</span>,</span>
<span>                            upper  <span class="op">=</span> <span class="st">"Region"</span>,</span>
<span>                            times  <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>                            values <span class="op">=</span> <span class="st">"Immigration"</span>,</span>
<span>                            yttl_width  <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View result</span></span>
<span><span class="va">time_series_heatmap</span></span></code></pre>
<p><img src="https://github.com/sgmmahon/hhmR/blob/main/images/tshhm_initial_output.png?raw=true"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/sgmmahon/hhmR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/sgmmahon/hhmR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing hhmR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael Mahony <br><small class="roles"> Maintainer, author, copyright holder </small> <a href="https://orcid.org/0000-0003-2784-2745" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Francisco Rowe <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-4137-0246" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Carmen Cabrera-Arnau <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-2732-6436" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Mahony, Francisco Rowe, Carmen Cabrera-Arnau.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
